#!/bin/bash

if [ -z "$1" ]; then
  echo "Usage: $0 <filename>"
  exit 1
fi

FILE="$1"

# Get header line and clean it
header_line=$(head -n 1 "$FILE")
clean_header=$(echo "$header_line" | tr -d '\r' | sed 's/[[:space:]]*$//')
IFS=';' read -r -a headers <<< "$clean_header"
num_columns=${#headers[@]}

# Loop through columns
for ((i = 1; i <= num_columns; i++)); do
  column_data=$(tail -n +2 "$FILE" | tr -d '\r' | cut -d';' -f"$i")
  empty_count=$(echo "$column_data" | grep -c '^$')
  echo "${headers[$((i - 1))]}: $empty_count"
done
